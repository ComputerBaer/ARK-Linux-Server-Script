#!/bin/bash

# Version Checker 
version="1.0.5"

echo "Checking version with github."

source ../version.ini

# Compare Versions
if [ $version != $viewserver ]; then
    echo "Script update avaibale!"
    echo "Updating script. Please wait."
    echo "Downloading shell file."
    curl https://raw.githubusercontent.com/Zendrex/ARK-Linux-Server-Script/master/.serverscript/viewserver -o viewserver -#
    echo "File overwritten. Restarting script."
    echo
    echo "TODO: MAKESURE THERE IS NO STALL"
    exit 0
fi

source ../configuration.ini

echo
echo "Checking in session exists..."
if screen -list | grep -q "$sessionName"; then
    echo
    echo -e " \e[1;32mIMPORTANT"
    echo
    echo " To detach from this screen, hold CTRL+A+D (in that order)"
    echo
    echo " You will be brought to the session in 10 seconds."
    sleep 10s
    clear
    screen -r $sessionName
    echo
else
  echo
  echo "Could not find the server session. The server is not running."
  echo
  exit 0
fi
